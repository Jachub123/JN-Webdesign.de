<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body></body>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script>
    const settings = {
      async: true,
      crossDomain: true,
      url: "https://ip-geo-location.p.rapidapi.com/ip/check?format=json",
      method: "GET",
      headers: {
        "X-RapidAPI-Host": "ip-geo-location.p.rapidapi.com",
        "X-RapidAPI-Key": "e0c3d2e663msh42c23033d5d849dp1c3ce4jsn9a916d1772b1",
      },
    };

    $.ajax(settings).done(function (response) {
      console.log(response["status"]);
      const content = JSON.stringify(response);
      $.ajax({
        method: "POST",
        url: "log.php",
        data: {
          ip: response["ip"],
          city: response["city"]["name"],
          area: response["area"]["name"],
          country: response["country"]["name"],
          isp: response["asn"]["organisation"],
        },
        dataType: "json",
      });
    });
  </script>
</html>
